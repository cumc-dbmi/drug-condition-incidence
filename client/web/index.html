<!DOCTYPE html>
<html lang="en" ng-app="ohdsiInformerApp">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">

    <title>Incidence Rate</title>

    <link href="seir.css" rel="stylesheet">

</head>
<body>
<header class="masthead">
    <div class="container">
        <div class="nav-header">
            <h1>
                <a href="#" title="OHDSI">
                    <img id="logo-main" src="img/ohdsi-logo-with-text.png" width="200" alt="Logo Thing main logo">
                </a>
            </h1>
        </div>
    </div>
</header>
<div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
    </div><!--/.navbar-collapse -->
</div>

<div class="ng-cloak main-container container-fluid" ng-controller="ohdsiInformerCtrl">
    <div class="col-xs-12 main-content" ng-show="view === 'main'">
        <div id="question-section">
            <img src="img/pill.png" width="100" alt="Pill">
            <img src="img/graph.png" width="100" alt="Graph">
            <h1>How Often...</h1>
            <h3>How often do patients get a condition after starting a drug?</h3><br>
            <div>
                <h4>Which drug are you interested in?</h4>
                <div class="row">
                    <div class="col-xs-4">
                    </div>
                    <div class="col-xs-4">
                        <input id="treatmentName" class="form-control" ng-model="treatment.name"/>
                    </div>
                    <div class="col-xs-4">
                    </div>
                </div>
            </div>
            <div>
                <h4>Which condition are you interested in?</h4>
                <div class="row">
                    <div class="col-xs-4">
                    </div>
                    <div class="col-xs-4">
                        <input id="outcomeName" class="form-control" ng-model="outcome.name"
                               placeholder="Leave blank for conditions on product label" />
                    </div>
                    <div class="col-xs-4">
                    </div>
                </div>
            </div>
            <br>

            <div ng-if="treatment.code && treatment.code !== ''">

                <div class="row" style="margin:10px">
                    <div class="col-xs-4">
                    </div>
                    <div class="col-xs-2">
                        <button class="btn btn-warning btn-block" ng-click="showTable()">Go &raquo;</button>
                    </div>
                    <div class="col-xs-2">
                        <button class="btn btn-default btn-block" ng-click="clear()">Clear</button>
                    </div>
                    <div class="col-xs-4">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-12 main-content" ng-show="view === 'table'">
        <div class="row" style="margin-top:20px">
            <div class="col-xs-12">
                <button class="btn btn-primary" ng-click="setView('main')">&laquo; Back</button>
            </div>
            <div class="col-xs-12">
                <h1>Risk of {{outcome.name}} with {{treatment.name}}</h1>
                <!--<p align="center">Baseline incidence of {{outcome.name}} in males aged 60-70 on {{comparator.name}} is
                  3 events per 1000 persons every year. The incidence of insomnia in all males aged 60-70 is 2.1 events per 1000 person year.</p>-->
                <!--<h3><p align="center">Baseline incidence of {{outcome.name}} on {{treatment.name}} is 3 events per 1000 persons every year.</p></h3>-->
                <h4>Amongst patients initiating {{treatment.name}}, onset of {{outcome.name}} occurs in between
                    {{incidenceRate.incidence_proportion_range_low | number : 4}} and
                    {{incidenceRate.incidence_proportion_range_high | number : 4}}
                    of patients during the 1 year after exposure start</h4>
                <br><br>
            </div>

            <div class="col-xs-2">
            </div>
            <div class="col-xs-8" id="rangechart" ng-if="chartOptions()">
                <hc-chart options="chartOptions()">Range Bar Chart</hc-chart>
            </div>
            <div class="col-xs-2">
            </div>
        </div>


        <div class="row" style="margin-top:20px">
            <div class="col-xs-1">
            </div>
            <div class="col-xs-10" style="margin-top:20px">
                <table class="table table-striped table-hover ">
                    <thead>
                    <tr>
                        <th>Source</th>
                        <th>Country</th>
                        <th>Condition</th>
                        <th>Incidence Proportion</th>

                    </tr>
                    </thead>
                    <tbody>

                    <tr ng-repeat="r in incidenceRateSource | limitTo:itemsLimit track by $index">
                        <td>{{r.source_short_name}}</td>
                        <td>{{r.source_country}}</td>
                        <td>{{outcome.name}}</td>
                        <td>{{r.incidence_proportion | number : 4}}</td>

                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-xs-1">
            </div>

        </div>

    </div>
</div>
<script src="seir.js"></script>
</body>
</html>
